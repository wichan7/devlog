---
title: Next.jsを使ってみて感じたこと
description: 長く生き残る技術なのか？
date: 2026-02-08
tags:
  - Nextjs
  - Web
---

最近、個人プロジェクトでNext.jsをかなり使ってみた。なぜNextだったかというと、まず「NextはReactの未来だ、知らなければ取り残される」という脅しのような言葉が気になり、実際にReactチームがNext.jsを標準として推し進めているから、知っておくべきだという考えだった。

そして実際に経験してみたNext.jsは、混乱する部分が多いツールだった。

## SSRとサーバーの実体
Next.js関連の記事を見ると、ほとんどの場合SSRとHydrationを非常に大きな利点として挙げている。ここで最初の混乱が来た。Reactは単純に静的リソースを生成するツールなのに、いったいどうやってサーバーサイドレンダリングをするというのか？

調べてみると、Nextはビルド時にNode.jsベースのサーバーが一緒にビルドされる。このNodeサーバーがHydrationなどの作業を実行してくれる構造だ。インフラの観点から見ると、NginxのようなWebサーバーだけが必要だったReactに比べて、中間にWASを管理する負担が追加されたことになる。後述するVercelのようなプラットフォームを使わない場合、これの管理がかなり大きなコストになるだろう。

## サーバーとクライアントの曖昧な境界
Server ComponentとClient Componentの区別は混乱の坩堝だった。

SSRが利点だというので、できるだけServer Component中心にソースを書いてみた。テーマ適用のためにzustandのグローバルストアを使ったが、しまった、Server-Side JSXとClient-Side JSXは状態を共有できない。

とりあえずJava + Thymeleafのような組み合わせは使用する言語が違うのでサーバー/クライアントの区別が自然で、このような理解は必要なかった。しかしNextはすべてのソースがJSだ。コードを書きながらも、このロジックがサーバーで実行されるのかクライアントで実行されるのか常に意識しなければならなかった。

この方式はBEとFEの責任を分けて発展してきた時代性に逆行するという感じを受けた。

結局、利点というサーバーコンポーネントはすべて取り除いて'use client'を貼り付け、SSRの代わりに/api配下にAPIを作って呼び出す慣れ親しんだ構造に戻ってしまった。


## Server Actionという名前のRFC
Web版RFCであるServer Actionだ。サーバー関数をクライアントからimportして使う方式で、シリアライズ可能なパラメータとリターンなら'use client'内部でも関数を持ってきて使える。

いや、server-sideのソースコードはサーバーでのみ実行されるんじゃないか？内部的には、アクション関数を作るとnextがその関数に固有値を付け、クライアントソースコードにもその関数をhttp callの形で実行し、結果をreturnするようにビルドされる。

これが最近、セキュリティ脆弱性(CVE)で10点満点を記録した。サーバーアクションをPromiseを使ってシリアライズ/デシリアライズする部分で穴が発生し、結果的にペイロードに`.then()`関数をうまくインジェクションすると、Nodeサーバーでシェルまで実行できるレベルだった。時代に逆行した代償をたっぷり受けたわけだ。


## 私はNextが嫌いだ
私はNextが嫌いだ。しかし、掲げる代替案はない。

さんざん批判したが、Reactベースの開発者がSEOのためのSSRを確保しながら、これくらいの開発体験を得られる代替品が何があるだろうか？

Astro？Remix？やったことがないので正直よくわからない。味見したThymeleaf、JSPと比較するなら、私はNextを使うと思う。

そしてNextはうーん...まあ...だが、Vercelは最高だ。Nextプロジェクトを作ると、Vercelが提供する豊富な機能がすごい。GitHubレポジトリへの連携、CI/CD、証明書管理、Analytics、Serverless-RDB、No-SQL DBまで、ほとんどワンクリック、そして無料で構成される。

インフラ構築の工数をスキップして機能実装にだけ集中できるというのは、趣味の個人プロジェクトではと~っても大きな利点だ。
 

## 結論
よくある開発格言のように、世の中に銀の弾丸はない。少なくとも私が見る限り、Next.jsは誤解しやすい概念とセキュリティ脆弱性の塊だった。

技術が肥大化して感じられ、名声に比べて失望する部分が多かった。Vercelという資本力のある強結合プラットフォームに力を受けて、銀の弾丸のようにマーケティングされているように見える。

でも実はこのブログもNextで開発した。Vercelのデプロイの便利さは本当に最高だ。

サーバー側の魔法が多すぎてエンタープライズ級として推奨するのは難しいだろうが、結局DXをうまく捉えたVercel + Nextが、MVPのような小規模開発市場では今後も勢いよく進むのではないだろうか？
